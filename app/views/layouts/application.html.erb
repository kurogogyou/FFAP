<!DOCTYPE html>
<html>
<head>
  <title>Fast Find Auto Parts</title>
  <%= stylesheet_link_tag    "application", media: "all", "data-turbolinks-track" => true %>
  <%= javascript_include_tag "application", "data-turbolinks-track" => true %>
  <%= csrf_meta_tags %>
</head>
<body class='<%= controller.controller_name %>'>
  <div id="banner">
    <%= image_tag("logo.jpg") %>
    <%= @page_title || "Fast Find Auto Parts" %>
    <% if current_user %>
    <% session = Session.find %>
    <% user = current_user %>
    <% end %>
  </div>
  <div id="columns">
    <div id="side">
      <div id="welcome">
        <ul>
          <% if session %>
            <h2>Welcome, <%= current_user.username %></h2>
          <% end %>
        </ul>
      </div>
      <div id="cart">
        <% if @cart %>
          <%= hidden_div_if(@cart.line_items.empty?, id: 'cart') do %>
            <%= render @cart %>
          <% end %>
        <% end %>
      </div>
      <ul>
        <li><%= link_to 'Home', home_path %></li>
        <li><%= link_to 'Catalog', store_path %></li>
        <li><%= link_to 'FAQ', faq_path %></li>
        <li><%= link_to 'About Us', about_path %></li>
        <li><%= link_to 'More info', docs_path %></li>
      </ul>

      <% if session %>
        <ul>
        <li><%= link_to 'Orders', orders_path %></li>
        <% if user.role == 'admin' %>
          <li><%= link_to 'Deliveries', deliveries_path %></li>
          <li><%= link_to 'Products', products_path %></li>
          <li><%= link_to 'Users', users_path %></li>
          <li><%= link_to 'Admin Page', admin_path %></li>
          <li><%= link_to 'Sellers', sellers_path %></li>
        <% end %>
        <% if user.role == 'seller' %>
          <li><%= link_to 'Products', products_path %></li>
          <li><%= link_to 'Manage Seller', manage_seller_path %></li>
        <% end %>
        <% if user.role == 'client' %>
          <li><%= link_to 'Register Vehicle', new_vehicle_path %></li>
        <% end %>
        <li><%= link_to 'Edit user', edit_user_path(:current) %> | 
        <%= link_to 'Logout', logout_path, method: :delete%></li>
        </ul>
      <% else %>
        <ul>
        <li><%= link_to 'Register', new_user_path %> | 
        <%= link_to 'Log in', login_path, method: :new%></li>
        </ul>
      <%end%>
    </div>
    <div id="main">
      <%= yield %>
    </div>
  </div>

</body>
</html>
