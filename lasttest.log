  [1m[36m (2.7ms)[0m  [1mselect pg_terminate_backend(pg_stat_activity.pid) from pg_stat_activity where datname='db/FFAP_test' AND state='idle';[0m
  [1m[35m (222.5ms)[0m  DROP DATABASE IF EXISTS "db/FFAP_test"
  [1m[36m (637.2ms)[0m  [1mCREATE DATABASE "db/FFAP_test" ENCODING = 'utf8'[0m
  [1m[35mSQL (0.4ms)[0m  CREATE EXTENSION IF NOT EXISTS "plpgsql"
  [1m[36m (53.0ms)[0m  [1mCREATE TABLE "carts" ("id" serial primary key, "created_at" timestamp, "updated_at" timestamp) [0m
  [1m[35m (58.3ms)[0m  CREATE TABLE "line_items" ("id" serial primary key, "product_id" integer, "cart_id" integer, "created_at" timestamp, "updated_at" timestamp, "quantity" integer DEFAULT 1, "order_id" integer) 
  [1m[36m (57.8ms)[0m  [1mCREATE INDEX "index_line_items_on_cart_id" ON "line_items" USING btree ("cart_id")[0m
  [1m[35m (37.7ms)[0m  CREATE INDEX "index_line_items_on_order_id" ON "line_items" USING btree ("order_id")
  [1m[36m (38.5ms)[0m  [1mCREATE INDEX "index_line_items_on_product_id" ON "line_items" USING btree ("product_id")[0m
  [1m[35m (81.3ms)[0m  CREATE TABLE "orders" ("id" serial primary key, "name" character varying(255), "address" text, "email" character varying(255), "pay_type" character varying(255), "created_at" timestamp, "updated_at" timestamp) 
  [1m[36m (80.9ms)[0m  [1mCREATE TABLE "products" ("id" serial primary key, "title" character varying(255), "description" text, "image_url" character varying(255), "price" decimal(8,2), "created_at" timestamp, "updated_at" timestamp) [0m
  [1m[35m (80.7ms)[0m  CREATE TABLE "users" ("id" serial primary key, "name" character varying(255), "password_digest" character varying(255), "created_at" timestamp, "updated_at" timestamp) 
  [1m[36m (7.5ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying(255) NOT NULL) [0m
  [1m[35m (38.9ms)[0m  CREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")
  [1m[36m (0.7ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (8.4ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150701164518')
  [1m[36m (9.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150527232429')[0m
  [1m[35m (10.0ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612153201')
  [1m[36m (10.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150614125750')[0m
  [1m[35m (9.7ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612155931')
  [1m[36m (10.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150614125851')[0m
  [1m[35m (9.7ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150531011322')
  [1m[36m (10.2ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150531012029')[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.6ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Run options: --seed 39222

# Running tests:

  [1m[35m (0.8ms)[0m  ALTER TABLE "carts" DISABLE TRIGGER ALL;ALTER TABLE "line_items" DISABLE TRIGGER ALL;ALTER TABLE "orders" DISABLE TRIGGER ALL;ALTER TABLE "products" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "users" ("name", "password_digest", "created_at", "updated_at", "id") VALUES ('dave', '$2a$10$TUi.vXUsj2jc31.WmCnAzeoEkzmPWHxd6jL5Jgpf5GDhYdI84pDMS', '2015-07-03 14:26:09', '2015-07-03 14:26:09', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "users" ("name", "password_digest", "created_at", "updated_at", "id") VALUES ('susannah', '$2a$10$6b3sG7xLaiugAzyytLClreAO.AJjh4r0t26RsJUBlRkAkr8C/DrYa', '2015-07-03 14:26:09', '2015-07-03 14:26:09', 298486374)
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM "products"[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "products" ("description", "image_url", "price", "title", "created_at", "updated_at", "id") VALUES ('MyText', 'MyString', 9.99, 'MyString', '2015-07-03 14:26:09', '2015-07-03 14:26:09', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "products" ("description", "image_url", "price", "title", "created_at", "updated_at", "id") VALUES ('Retrovisor Honda Civic 2007', 'retro.jpg', 12.5, 'Retrovisor', '2015-07-03 14:26:09', '2015-07-03 14:26:09', 413623845)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "products" ("description", "image_url", "price", "title", "created_at", "updated_at", "id") VALUES ('Ruby is the fastest growing and most exciting dynamic language out there, If you need to get working programs delivered fast, you should add Ruby to your toolbox.', 'ruby.png', 49.5, 'Programming Ruby 1.9', '2015-07-03 14:26:09', '2015-07-03 14:26:09', 207281424)
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "products" ("description", "image_url", "price", "title", "created_at", "updated_at", "id") VALUES ('MyText', 'MyString', 9.99, 'MyString', '2015-07-03 14:26:09', '2015-07-03 14:26:09', 298486374)[0m
  [1m[35mFixture Delete (0.5ms)[0m  DELETE FROM "orders"
  [1m[36mFixture Insert (0.7ms)[0m  [1mINSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at", "id") VALUES ('Dave Thomas', 'MyText', 'dave@example.org', 'Check', '2015-07-03 14:26:09', '2015-07-03 14:26:09', 980190962)[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'MyString', 'MyString', '2015-07-03 14:26:09', '2015-07-03 14:26:09', 298486374)
  [1m[36mFixture Delete (0.9ms)[0m  [1mDELETE FROM "line_items"[0m
  [1m[35mFixture Insert (0.8ms)[0m  INSERT INTO "line_items" ("created_at", "updated_at", "id", "order_id", "product_id") VALUES ('2015-07-03 14:26:09', '2015-07-03 14:26:09', 980190962, 980190962, 207281424)
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "line_items" ("created_at", "updated_at", "id", "product_id", "cart_id") VALUES ('2015-07-03 14:26:09', '2015-07-03 14:26:09', 298486374, 207281424, 980190962)[0m
  [1m[35mFixture Delete (0.5ms)[0m  DELETE FROM "carts"
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2015-07-03 14:26:09', '2015-07-03 14:26:09', 980190962)[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2015-07-03 14:26:09', '2015-07-03 14:26:09', 298486374)
  [1m[36m (7.8ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.5ms)[0m  ALTER TABLE "carts" ENABLE TRIGGER ALL;ALTER TABLE "line_items" ENABLE TRIGGER ALL;ALTER TABLE "orders" ENABLE TRIGGER ALL;ALTER TABLE "products" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
------------------------------------------
AdminControllerTest: test_should_get_index
------------------------------------------
  [1m[35mUser Load (1.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by AdminController#index as HTML
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 980190962 LIMIT 1[0m
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "orders"
  Rendered admin/index.html.erb within layouts/application (2.9ms)
Completed 200 OK in 50ms (Views: 45.1ms | ActiveRecord: 1.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
.  [1m[35m (0.2ms)[0m  BEGIN
----------------------------------------------------------------------------
Api::ProductQueryControllerTest: test_should_return_list_of_products_in_JSON
----------------------------------------------------------------------------
Started GET "/product_query" for 127.0.0.1 at 2015-07-03 10:26:10 -0400
Processing by Api::ProductQueryController#index as JSON
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1[0m
Redirected to http://www.example.com/login
Filter chain halted as :authorize rendered or redirected
Completed 302 Found in 16ms (ActiveRecord: 0.4ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
F  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------------------
Api::ProductQueryControllerTest: test_should_return_list_of_products_in_XML
---------------------------------------------------------------------------
Started GET "/product_query" for 127.0.0.1 at 2015-07-03 10:26:10 -0400
Processing by Api::ProductQueryController#index as XML
  [1m[35mUser Load (0.4ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :authorize rendered or redirected
Completed 302 Found in 3ms (ActiveRecord: 0.4ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
F  [1m[35m (0.1ms)[0m  BEGIN
-----------------------------------------------------------------
Api::ProductQueryControllerTest: test_should_return_product_by_id
-----------------------------------------------------------------
  [1m[36mProduct Load (0.7ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT 1[0m  [["id", 207281424]]
Started GET "/product_query/207281424" for 127.0.0.1 at 2015-07-03 10:26:10 -0400
Processing by Api::ProductQueryController#show as JSON
  Parameters: {"id"=>"207281424"}
  [1m[35mUser Load (0.4ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :authorize rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.4ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
F  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------------------------
Api::ProductQueryControllerTest: test_should_return_product_by_title
--------------------------------------------------------------------
Started GET "/product_query?title=Retrovisor" for 127.0.0.1 at 2015-07-03 10:26:10 -0400
Processing by Api::ProductQueryController#index as JSON
  Parameters: {"title"=>"Retrovisor"}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1[0m
Redirected to http://www.example.com/login
Filter chain halted as :authorize rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
F  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
--------------------------------------------
CartsControllerTest: test_should_create_cart
--------------------------------------------
  [1m[35mCart Load (0.7ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "carts"
Processing by CartsController#create as HTML
  Parameters: {"cart"=>{}}
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.8ms)[0m  INSERT INTO "carts" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", Fri, 03 Jul 2015 14:26:10 UTC +00:00], ["updated_at", Fri, 03 Jul 2015 14:26:10 UTC +00:00]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/carts/980190963
Completed 302 Found in 11ms (ActiveRecord: 2.1ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "carts"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
.  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------
CartsControllerTest: test_should_destroy_cart
---------------------------------------------
  [1m[36mCart Load (0.4ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.3ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "carts"[0m
Processing by CartsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCart Load (0.4ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT 1  [["id", "980190962"]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLineItem Load (0.8ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1  [["cart_id", 980190962]]
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "line_items" WHERE "line_items"."id" = $1[0m  [["id", 298486374]]
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "carts" WHERE "carts"."id" = $1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/
Completed 302 Found in 41ms (ActiveRecord: 2.6ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "carts"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
.  [1m[35m (0.1ms)[0m  BEGIN
-----------------------------------------
CartsControllerTest: test_should_get_edit
-----------------------------------------
  [1m[36mCart Load (0.4ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.3ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CartsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 980190962 LIMIT 1[0m
  [1m[35mCart Load (0.4ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT 1  [["id", "980190962"]]
  Rendered carts/_form.html.erb (7.5ms)
  [1m[36mLineItem Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = $1 LIMIT 1[0m  [["cart_id", 980190962]]
  [1m[35mLineItem Load (0.5ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1  [["cart_id", 980190962]]
  [1m[36mProduct Load (1.2ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = $1 ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 207281424]]
  Rendered line_items/_line_item.html.erb (7.7ms)
  Rendered carts/_cart.html.erb (12.5ms)
Completed 200 OK in 88ms (Views: 81.9ms | ActiveRecord: 3.1ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
.  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------
CartsControllerTest: test_should_get_index
------------------------------------------
  [1m[35mCart Load (0.4ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CartsController#index as HTML
  [1m[35mUser Load (0.4ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 980190962 LIMIT 1
  [1m[36mCart Load (0.4ms)[0m  [1mSELECT "carts".* FROM "carts"[0m
Completed 200 OK in 9ms (Views: 6.1ms | ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
.  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
----------------------------------------
CartsControllerTest: test_should_get_new
----------------------------------------
  [1m[35mCart Load (0.4ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CartsController#new as HTML
  [1m[35mUser Load (0.4ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 980190962 LIMIT 1
  Rendered carts/_form.html.erb (2.2ms)
  Rendered collection (0.0ms)
  Rendered carts/_cart.html.erb (1.6ms)
Completed 200 OK in 12ms (Views: 10.0ms | ActiveRecord: 0.4ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
.  [1m[35m (0.1ms)[0m  BEGIN
------------------------------------------
CartsControllerTest: test_should_show_cart
------------------------------------------
  [1m[36mCart Load (1.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.3ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CartsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 980190962 LIMIT 1[0m
  [1m[35mCart Load (0.4ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT 1  [["id", "980190962"]]
  [1m[36mLineItem Load (0.5ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 980190962]]
  [1m[35mProduct Load (0.5ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = $1 ORDER BY "products"."id" ASC LIMIT 1  [["id", 207281424]]
  Rendered line_items/_line_item.html.erb (2.8ms)
  Rendered carts/_cart.html.erb (6.9ms)
  Rendered line_items/_line_item.html.erb (0.5ms)
  Rendered carts/_cart.html.erb (1.6ms)
Completed 200 OK in 17ms (Views: 12.3ms | ActiveRecord: 2.3ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
.  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------
CartsControllerTest: test_should_update_cart
--------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CartsController#update as HTML
  Parameters: {"cart"=>{}, "id"=>"980190962"}
  [1m[36mCart Load (0.4ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT 1[0m  [["id", "980190962"]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/carts/980190962
Completed 302 Found in 5ms (ActiveRecord: 0.7ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
.  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
---------------------------------------------------------
LineItemsControllerTest: test_should_create_item_via_ajax
---------------------------------------------------------
  [1m[35mLineItem Load (0.6ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "line_items"
  [1m[36mProduct Load (0.4ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT 1[0m  [["id", 207281424]]
Processing by LineItemsController#create as JS
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "carts" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", Fri, 03 Jul 2015 14:26:10 UTC +00:00], ["updated_at", Fri, 03 Jul 2015 14:26:10 UTC +00:00]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mProduct Load (0.4ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT 1[0m  [["id", "207281424"]]
  [1m[35mLineItem Load (0.6ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1 AND "line_items"."product_id" = 207281424 LIMIT 1  [["cart_id", 980190964]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "line_items" ("cart_id", "created_at", "product_id", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["cart_id", 980190964], ["created_at", Fri, 03 Jul 2015 14:26:10 UTC +00:00], ["product_id", 207281424], ["updated_at", Fri, 03 Jul 2015 14:26:10 UTC +00:00]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLineItem Load (0.5ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1  [["cart_id", 980190964]]
  [1m[36mProduct Load (0.5ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = $1 ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 207281424]]
  Rendered line_items/_line_item.html.erb (3.4ms)
  Rendered carts/_cart.html.erb (8.4ms)
Completed 200 OK in 25ms (Views: 11.6ms | ActiveRecord: 4.0ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "line_items"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
.  [1m[35m (0.1ms)[0m  BEGIN
-----------------------------------------------------
LineItemsControllerTest: test_should_create_line_item
-----------------------------------------------------
  [1m[36mLineItem Load (0.5ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.3ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "line_items"[0m
  [1m[35mProduct Load (0.4ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT 1  [["id", 207281424]]
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "carts" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", Fri, 03 Jul 2015 14:26:10 UTC +00:00], ["updated_at", Fri, 03 Jul 2015 14:26:10 UTC +00:00]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mProduct Load (0.4ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT 1  [["id", "207281424"]]
  [1m[36mLineItem Load (0.4ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1 AND "line_items"."product_id" = 207281424 LIMIT 1[0m  [["cart_id", 980190965]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["cart_id", 980190965], ["created_at", Fri, 03 Jul 2015 14:26:10 UTC +00:00], ["product_id", 207281424], ["updated_at", Fri, 03 Jul 2015 14:26:10 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/
Completed 302 Found in 10ms (ActiveRecord: 2.5ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "line_items"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
.  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------------
LineItemsControllerTest: test_should_destroy_line_item
------------------------------------------------------
  [1m[35mLineItem Load (0.4ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "line_items"
Processing by LineItemsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 980190962 LIMIT 1[0m
  [1m[35mLineItem Load (0.4ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."id" = $1 LIMIT 1  [["id", "980190962"]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "line_items" WHERE "line_items"."id" = $1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/line_items
Completed 302 Found in 5ms (ActiveRecord: 1.4ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "line_items"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
.  [1m[35m (0.3ms)[0m  BEGIN
---------------------------------------------
LineItemsControllerTest: test_should_get_edit
---------------------------------------------
  [1m[36mLineItem Load (0.5ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.3ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by LineItemsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 980190962 LIMIT 1[0m
  [1m[35mLineItem Load (0.4ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."id" = $1 LIMIT 1  [["id", "980190962"]]
  [1m[36mProduct Load (0.5ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = $1 ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 207281424]]
  Rendered line_items/_form.html.erb (11.6ms)
Completed 200 OK in 20ms (Views: 16.5ms | ActiveRecord: 1.3ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
.  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
----------------------------------------------
LineItemsControllerTest: test_should_get_index
----------------------------------------------
  [1m[35mLineItem Load (0.3ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by LineItemsController#index as HTML
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 980190962 LIMIT 1
  [1m[36mLineItem Load (0.4ms)[0m  [1mSELECT "line_items".* FROM "line_items"[0m
  [1m[35mProduct Load (0.5ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = $1 ORDER BY "products"."id" ASC LIMIT 1  [["id", 207281424]]
  [1m[36mProduct Load (0.4ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = $1 ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 207281424]]
  [1m[35mCart Load (0.6ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 ORDER BY "carts"."id" ASC LIMIT 1  [["id", 980190962]]
Completed 200 OK in 16ms (Views: 11.6ms | ActiveRecord: 2.4ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
.  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------
LineItemsControllerTest: test_should_get_new
--------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.3ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by LineItemsController#new as HTML
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 980190962 LIMIT 1[0m
  Rendered line_items/_form.html.erb (4.2ms)
Completed 200 OK in 11ms (Views: 8.5ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
.  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------
LineItemsControllerTest: test_should_show_line_item
---------------------------------------------------
  [1m[35mLineItem Load (0.4ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by LineItemsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mUser Load (0.4ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 980190962 LIMIT 1
  [1m[36mLineItem Load (0.3ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."id" = $1 LIMIT 1[0m  [["id", "980190962"]]
  [1m[35mProduct Load (0.4ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = $1 ORDER BY "products"."id" ASC LIMIT 1  [["id", 207281424]]
Completed 200 OK in 9ms (Views: 5.9ms | ActiveRecord: 1.1ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
.  [1m[35m (0.2ms)[0m  BEGIN
-----------------------------------------------------
LineItemsControllerTest: test_should_update_line_item
-----------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by LineItemsController#update as HTML
  Parameters: {"line_item"=>{"product_id"=>"207281424"}, "id"=>"980190962"}
  [1m[36mUser Load (3.5ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 980190962 LIMIT 1[0m
  [1m[35mLineItem Load (0.9ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."id" = $1 LIMIT 1  [["id", "980190962"]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/line_items/980190962
Completed 302 Found in 55ms (ActiveRecord: 4.8ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
.  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------
OrderNotifierTest: test_received
--------------------------------
  [1m[36mOrder Load (0.7ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mLineItem Load (0.7ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = $1  [["order_id", 980190962]]
  [1m[36mProduct Load (0.4ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = $1 ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 207281424]]
  Rendered line_items/_line_item.text.erb (2.7ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
.  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------
OrderNotifierTest: test_shipped
-------------------------------
  [1m[35mOrder Load (0.5ms)[0m  SELECT "orders".* FROM "orders" WHERE "orders"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mLineItem Load (0.5ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = $1[0m  [["order_id", 980190962]]
  [1m[35mProduct Load (0.4ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = $1 ORDER BY "products"."id" ASC LIMIT 1  [["id", 207281424]]
  Rendered line_items/_line_item.html.erb (3.3ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
.  [1m[35m (0.1ms)[0m  BEGIN
------------------------------------------------
OrdersControllerTest: test_requires_item_in_cart
------------------------------------------------
  [1m[36mOrder Load (0.5ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.3ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by OrdersController#new as HTML
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "carts" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", Fri, 03 Jul 2015 14:26:11 UTC +00:00], ["updated_at", Fri, 03 Jul 2015 14:26:11 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLineItem Exists (0.4ms)[0m  SELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = $1 LIMIT 1  [["cart_id", 980190966]]
Redirected to http://test.host/
Completed 302 Found in 6ms (ActiveRecord: 1.2ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
.  [1m[35m (0.1ms)[0m  BEGIN
----------------------------------------------
OrdersControllerTest: test_should_create_order
----------------------------------------------
  [1m[36mOrder Load (0.4ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.3ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "orders"[0m
Processing by OrdersController#create as HTML
  Parameters: {"order"=>{"address"=>"MyText", "email"=>"dave@example.org", "name"=>"Dave Thomas", "pay_type"=>"Check"}}
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "carts" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", Fri, 03 Jul 2015 14:26:11 UTC +00:00], ["updated_at", Fri, 03 Jul 2015 14:26:11 UTC +00:00]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mLineItem Load (0.4ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 980190967]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "orders" ("address", "created_at", "email", "name", "pay_type", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["address", "MyText"], ["created_at", Fri, 03 Jul 2015 14:26:11 UTC +00:00], ["email", "dave@example.org"], ["name", "Dave Thomas"], ["pay_type", "Check"], ["updated_at", Fri, 03 Jul 2015 14:26:11 UTC +00:00]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mCart Load (0.3ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT 1[0m  [["id", 980190967]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mLineItem Load (0.4ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 980190967]]
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "carts" WHERE "carts"."id" = $1  [["id", 980190967]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLineItem Load (2.7ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = $1  [["order_id", 980190963]]
  Rendered collection (0.0ms)

Sent mail to dave@example.org (9.9ms)
Date: Fri, 03 Jul 2015 10:26:11 -0400
From: FFAP <ffap.itt.2015@gmail.com>
To: dave@example.org
Message-ID: <55969b83354b2_232211bfe802884@Aria.mail>
Subject: Fast Find Auto Parts Order Confirmation
Mime-Version: 1.0
Content-Type: text/plain;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

Dear Dave Thomas

Thank you for your recent order from Fast Find Auto Parts.

You ordered the following items:


We'll send you a separate e-mail when your order ships.
Redirected to http://test.host/
Completed 302 Found in 89ms (ActiveRecord: 6.4ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "orders"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
.  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-----------------------------------------------
OrdersControllerTest: test_should_destroy_order
-----------------------------------------------
  [1m[35mOrder Load (0.5ms)[0m  SELECT "orders".* FROM "orders" WHERE "orders"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "orders"
Processing by OrdersController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 980190962 LIMIT 1[0m
  [1m[35mOrder Load (0.4ms)[0m  SELECT "orders".* FROM "orders" WHERE "orders"."id" = $1 LIMIT 1  [["id", "980190962"]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mLineItem Load (0.5ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = $1  [["order_id", 980190962]]
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "line_items" WHERE "line_items"."id" = $1[0m  [["id", 980190962]]
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "orders" WHERE "orders"."id" = $1  [["id", 980190962]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/orders
Completed 302 Found in 9ms (ActiveRecord: 2.7ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "orders"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
.  [1m[35m (0.2ms)[0m  BEGIN
------------------------------------------
OrdersControllerTest: test_should_get_edit
------------------------------------------
  [1m[36mOrder Load (0.3ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by OrdersController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 980190962 LIMIT 1[0m
  [1m[35mOrder Load (0.3ms)[0m  SELECT "orders".* FROM "orders" WHERE "orders"."id" = $1 LIMIT 1  [["id", "980190962"]]
  Rendered orders/_form.html.erb (8.1ms)
Completed 200 OK in 17ms (Views: 13.6ms | ActiveRecord: 0.8ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
.  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------
OrdersControllerTest: test_should_get_index
-------------------------------------------
  [1m[36mOrder Load (0.3ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.3ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by OrdersController#index as HTML
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 980190962 LIMIT 1[0m
  [1m[35mOrder Load (0.4ms)[0m  SELECT "orders".* FROM "orders"
Completed 200 OK in 9ms (Views: 6.2ms | ActiveRecord: 0.8ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
.  [1m[35m (0.1ms)[0m  BEGIN
-----------------------------------------
OrdersControllerTest: test_should_get_new
-----------------------------------------
  [1m[36mOrder Load (0.4ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mProduct Load (0.4ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT 1[0m  [["id", 207281424]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "carts" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", Fri, 03 Jul 2015 14:26:11 UTC +00:00], ["updated_at", Fri, 03 Jul 2015 14:26:11 UTC +00:00]]
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "line_items" ("cart_id", "created_at", "product_id", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["cart_id", 980190968], ["created_at", Fri, 03 Jul 2015 14:26:11 UTC +00:00], ["product_id", 207281424], ["updated_at", Fri, 03 Jul 2015 14:26:11 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by OrdersController#new as HTML
  [1m[35mCart Load (0.3ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT 1  [["id", 980190968]]
  [1m[36mLineItem Exists (0.4ms)[0m  [1mSELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = $1 LIMIT 1[0m  [["cart_id", 980190968]]
  Rendered orders/_form.html.erb (4.0ms)
  [1m[35mLineItem Exists (0.4ms)[0m  SELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = $1 LIMIT 1  [["cart_id", 980190968]]
  [1m[36mLineItem Load (0.3ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 980190968]]
  [1m[35mProduct Load (0.3ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = $1 ORDER BY "products"."id" ASC LIMIT 1  [["id", 207281424]]
  Rendered line_items/_line_item.html.erb (2.3ms)
  Rendered carts/_cart.html.erb (4.7ms)
Completed 200 OK in 18ms (Views: 13.7ms | ActiveRecord: 1.7ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
.  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------
OrdersControllerTest: test_should_show_order
--------------------------------------------
  [1m[36mOrder Load (0.4ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.3ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by OrdersController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 980190962 LIMIT 1[0m
  [1m[35mOrder Load (0.3ms)[0m  SELECT "orders".* FROM "orders" WHERE "orders"."id" = $1 LIMIT 1  [["id", "980190962"]]
Completed 200 OK in 7ms (Views: 4.2ms | ActiveRecord: 0.8ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
.  [1m[35m (0.1ms)[0m  BEGIN
----------------------------------------------
OrdersControllerTest: test_should_update_order
----------------------------------------------
  [1m[36mOrder Load (0.3ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.3ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by OrdersController#update as HTML
  Parameters: {"order"=>{"address"=>"MyText", "email"=>"dave@example.org", "name"=>"Dave Thomas", "pay_type"=>"Check"}, "id"=>"980190962"}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 980190962 LIMIT 1[0m
  [1m[35mOrder Load (0.3ms)[0m  SELECT "orders".* FROM "orders" WHERE "orders"."id" = $1 LIMIT 1  [["id", "980190962"]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/orders/980190962
Completed 302 Found in 7ms (ActiveRecord: 1.3ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
.  [1m[35m (0.2ms)[0m  BEGIN
---------------------------
ProductTest: test_image_url
---------------------------
  [1m[36mProduct Exists (0.9ms)[0m  [1mSELECT 1 AS one FROM "products" WHERE "products"."title" = 'My little book' LIMIT 1[0m
  [1m[35mProduct Exists (0.4ms)[0m  SELECT 1 AS one FROM "products" WHERE "products"."title" = 'My little book' LIMIT 1
  [1m[36mProduct Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "products" WHERE "products"."title" = 'My little book' LIMIT 1[0m
  [1m[35mProduct Exists (0.3ms)[0m  SELECT 1 AS one FROM "products" WHERE "products"."title" = 'My little book' LIMIT 1
  [1m[36mProduct Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "products" WHERE "products"."title" = 'My little book' LIMIT 1[0m
  [1m[35mProduct Exists (0.3ms)[0m  SELECT 1 AS one FROM "products" WHERE "products"."title" = 'My little book' LIMIT 1
  [1m[36mProduct Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "products" WHERE "products"."title" = 'My little book' LIMIT 1[0m
  [1m[35mProduct Exists (0.4ms)[0m  SELECT 1 AS one FROM "products" WHERE "products"."title" = 'My little book' LIMIT 1
  [1m[36mProduct Exists (0.4ms)[0m  [1mSELECT 1 AS one FROM "products" WHERE "products"."title" = 'My little book' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
.  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------------
ProductTest: test_product_attributes_must_not_be_empty
------------------------------------------------------
  [1m[35mProduct Exists (0.4ms)[0m  SELECT 1 AS one FROM "products" WHERE "products"."title" IS NULL LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
.  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------------------------
ProductTest: test_product_is_not_valid_without_a_unique_title_-_i18n
--------------------------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT 1[0m  [["id", 207281424]]
  [1m[35mProduct Exists (0.4ms)[0m  SELECT 1 AS one FROM "products" WHERE "products"."title" = 'Programming Ruby 1.9' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
.  [1m[35m (0.1ms)[0m  BEGIN
------------------------------------------------
ProductTest: test_product_price_must_be_positive
------------------------------------------------
  [1m[36mProduct Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "products" WHERE "products"."title" = 'My little book' LIMIT 1[0m
  [1m[35mProduct Exists (0.4ms)[0m  SELECT 1 AS one FROM "products" WHERE "products"."title" = 'My little book' LIMIT 1
  [1m[36mProduct Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "products" WHERE "products"."title" = 'My little book' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
.  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------------
ProductsControllerTest: test_should_create_product
--------------------------------------------------
  [1m[35mProduct Load (0.3ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "products"
Processing by ProductsController#create as HTML
  Parameters: {"product"=>{"title"=>"Lorem Ipsum", "description"=>"plain description", "image_url"=>"lorem.jpg", "price"=>"19.95"}}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 980190962 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mProduct Exists (0.4ms)[0m  [1mSELECT 1 AS one FROM "products" WHERE "products"."title" = 'Lorem Ipsum' LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "products" ("created_at", "description", "image_url", "price", "title", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["created_at", Fri, 03 Jul 2015 14:26:11 UTC +00:00], ["description", "plain description"], ["image_url", "lorem.jpg"], ["price", #<BigDecimal:63134a8,'0.1995E2',18(18)>], ["title", "Lorem Ipsum"], ["updated_at", Fri, 03 Jul 2015 14:26:11 UTC +00:00]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/products/980190963
Completed 302 Found in 10ms (ActiveRecord: 1.9ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "products"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
.  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------
ProductsControllerTest: test_should_destroy_product
---------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.3ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "products"[0m
Processing by ProductsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 980190962 LIMIT 1
  [1m[36mProduct Load (0.3ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT 1[0m  [["id", "980190962"]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mLineItem Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "line_items" WHERE "line_items"."product_id" = $1 LIMIT 1[0m  [["product_id", 980190962]]
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "products" WHERE "products"."id" = $1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/products
Completed 302 Found in 9ms (ActiveRecord: 2.1ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "products"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
.  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------
ProductsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.3ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by ProductsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 980190962 LIMIT 1[0m
  [1m[35mProduct Load (0.3ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT 1  [["id", "980190962"]]
  Rendered products/_form.html.erb (5.8ms)
Completed 200 OK in 15ms (Views: 11.4ms | ActiveRecord: 0.8ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
.  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------
ProductsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.3ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by ProductsController#index as HTML
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 980190962 LIMIT 1[0m
  [1m[35mProduct Load (0.4ms)[0m  SELECT "products".* FROM "products"
Completed 200 OK in 34ms (Views: 31.3ms | ActiveRecord: 0.8ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
.  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------
ProductsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.3ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by ProductsController#new as HTML
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 980190962 LIMIT 1[0m
  Rendered products/_form.html.erb (5.0ms)
Completed 200 OK in 11ms (Views: 9.1ms | ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
.  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------
ProductsControllerTest: test_should_show_product
------------------------------------------------
  [1m[35mProduct Load (0.3ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by ProductsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 980190962 LIMIT 1
  [1m[36mProduct Load (0.3ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT 1[0m  [["id", "980190962"]]
Completed 200 OK in 7ms (Views: 4.2ms | ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
.  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------------
ProductsControllerTest: test_should_update_product
--------------------------------------------------
  [1m[35mProduct Load (0.3ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by ProductsController#update as HTML
  Parameters: {"product"=>{"title"=>"Lorem Ipsum", "description"=>"plain description", "image_url"=>"lorem.jpg", "price"=>"19.95"}, "id"=>"980190962"}
  [1m[35mUser Load (0.4ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 980190962 LIMIT 1
  [1m[36mProduct Load (0.3ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT 1[0m  [["id", "980190962"]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mProduct Exists (0.5ms)[0m  [1mSELECT 1 AS one FROM "products" WHERE ("products"."title" = 'Lorem Ipsum' AND "products"."id" != 980190962) LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  UPDATE "products" SET "title" = $1, "description" = $2, "image_url" = $3, "price" = $4, "updated_at" = $5 WHERE "products"."id" = 980190962  [["title", "Lorem Ipsum"], ["description", "plain description"], ["image_url", "lorem.jpg"], ["price", #<BigDecimal:6dcdbc8,'0.1995E2',18(18)>], ["updated_at", Fri, 03 Jul 2015 14:26:11 UTC +00:00]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/products/980190962
Completed 302 Found in 12ms (ActiveRecord: 2.4ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
.  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
----------------------------------------------
SessionsControllerTest: test_should_fail_login
----------------------------------------------
  [1m[35mUser Load (0.4ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."name" = 'dave' LIMIT 1[0m
Redirected to http://test.host/login
Completed 302 Found in 95ms (ActiveRecord: 0.5ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
.  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
----------------------------------------------
SessionsControllerTest: test_should_get_create
----------------------------------------------
  [1m[35mUser Load (0.4ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."name" = 'dave' LIMIT 1[0m
Redirected to http://test.host/admin
Completed 302 Found in 95ms (ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
.  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------
SessionsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35mUser Load (0.4ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by SessionsController#new as HTML
Completed 200 OK in 6ms (Views: 5.5ms | ActiveRecord: 0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
.  [1m[35m (0.1ms)[0m  BEGIN
------------------------------------------
SessionsControllerTest: test_should_logout
------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by SessionsController#destroy as HTML
Redirected to http://test.host/
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
.  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
-----------------------------------------------------------------------
StoreControllerTest: test_markup_needed_for_store.js.coffee_is_in_place
-----------------------------------------------------------------------
  [1m[35mUser Load (0.4ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by StoreController#index as HTML
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "carts" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", Fri, 03 Jul 2015 14:26:11 UTC +00:00], ["updated_at", Fri, 03 Jul 2015 14:26:11 UTC +00:00]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mProduct Load (0.9ms)[0m  SELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1
  [1m[36mProduct Load (0.7ms)[0m  [1mSELECT "products".* FROM "products" ORDER BY "products".title ASC[0m
  [1m[35mLineItem Exists (0.4ms)[0m  SELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = $1 LIMIT 1  [["cart_id", 980190969]]
  [1m[36mLineItem Load (0.3ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 980190969]]
  Rendered collection (0.0ms)
  Rendered carts/_cart.html.erb (2.3ms)
Completed 200 OK in 40ms (Views: 33.4ms | ActiveRecord: 3.1ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
.  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------
StoreControllerTest: test_should_get_index
------------------------------------------
  [1m[35mUser Load (0.4ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by StoreController#index as HTML
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "carts" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", Fri, 03 Jul 2015 14:26:11 UTC +00:00], ["updated_at", Fri, 03 Jul 2015 14:26:11 UTC +00:00]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mProduct Load (0.4ms)[0m  SELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1
  [1m[36mProduct Load (0.4ms)[0m  [1mSELECT "products".* FROM "products" ORDER BY "products".title ASC[0m
  [1m[35mLineItem Exists (0.4ms)[0m  SELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = $1 LIMIT 1  [["cart_id", 980190970]]
  [1m[36mLineItem Load (0.3ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 980190970]]
  Rendered collection (0.0ms)
  Rendered carts/_cart.html.erb (2.1ms)
Completed 200 OK in 35ms (Views: 30.0ms | ActiveRecord: 2.3ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
.  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
--------------------------------------
UserStoriesTest: test_buying_a_product
--------------------------------------
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "line_items"
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "orders"[0m
  [1m[35mProduct Load (0.3ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT 1  [["id", 207281424]]
Started GET "/" for 127.0.0.1 at 2015-07-03 10:26:11 -0400
Processing by StoreController#index as HTML
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "carts" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", Fri, 03 Jul 2015 14:26:11 UTC +00:00], ["updated_at", Fri, 03 Jul 2015 14:26:11 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mProduct Load (0.4ms)[0m  SELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1
  [1m[36mProduct Load (0.4ms)[0m  [1mSELECT "products".* FROM "products" ORDER BY "products".title ASC[0m
  [1m[35mLineItem Exists (0.4ms)[0m  SELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = $1 LIMIT 1  [["cart_id", 980190971]]
  [1m[36mLineItem Load (0.3ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 980190971]]
  Rendered collection (0.0ms)
  Rendered carts/_cart.html.erb (2.9ms)
Completed 200 OK in 38ms (Views: 33.1ms | ActiveRecord: 2.3ms)
Started POST "/line_items" for 127.0.0.1 at 2015-07-03 10:26:11 -0400
Processing by LineItemsController#create as JS
  Parameters: {"product_id"=>"207281424"}
  [1m[35mCart Load (0.4ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT 1  [["id", 980190971]]
  [1m[36mProduct Load (0.3ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT 1[0m  [["id", "207281424"]]
  [1m[35mLineItem Load (0.4ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1 AND "line_items"."product_id" = 207281424 LIMIT 1  [["cart_id", 980190971]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "line_items" ("cart_id", "created_at", "product_id", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["cart_id", 980190971], ["created_at", Fri, 03 Jul 2015 14:26:11 UTC +00:00], ["product_id", 207281424], ["updated_at", Fri, 03 Jul 2015 14:26:11 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mLineItem Load (0.3ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1  [["cart_id", 980190971]]
  [1m[36mProduct Load (0.3ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = $1 ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 207281424]]
  Rendered line_items/_line_item.html.erb (2.1ms)
  Rendered carts/_cart.html.erb (4.9ms)
Completed 200 OK in 14ms (Views: 5.2ms | ActiveRecord: 2.6ms)
  [1m[35mCart Load (0.3ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT 1  [["id", 980190971]]
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 980190971]]
  [1m[35mLineItem Load (0.4ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1  [["cart_id", 980190971]]
  [1m[36mProduct Load (0.3ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = $1 ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 207281424]]
Started GET "/orders/new" for 127.0.0.1 at 2015-07-03 10:26:12 -0400
Processing by OrdersController#new as HTML
  [1m[35mCart Load (0.3ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT 1  [["id", 980190971]]
  [1m[36mLineItem Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = $1 LIMIT 1[0m  [["cart_id", 980190971]]
  Rendered orders/_form.html.erb (47.5ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = $1 LIMIT 1  [["cart_id", 980190971]]
  [1m[36mLineItem Load (0.3ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 980190971]]
  [1m[35mProduct Load (0.3ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = $1 ORDER BY "products"."id" ASC LIMIT 1  [["id", 207281424]]
  Rendered line_items/_line_item.html.erb (2.2ms)
  Rendered carts/_cart.html.erb (4.6ms)
Completed 200 OK in 60ms (Views: 55.3ms | ActiveRecord: 1.3ms)
Started POST "/orders" for 127.0.0.1 at 2015-07-03 10:26:12 -0400
Processing by OrdersController#create as HTML
  Parameters: {"order"=>{"name"=>"Dave Thomas", "address"=>"123 The Street", "email"=>"dave@example.com", "pay_type"=>"Check"}}
  [1m[36mCart Load (0.3ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT 1[0m  [["id", 980190971]]
  [1m[35mLineItem Load (0.4ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1  [["cart_id", 980190971]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "orders" ("address", "created_at", "email", "name", "pay_type", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["address", "123 The Street"], ["created_at", Fri, 03 Jul 2015 14:26:12 UTC +00:00], ["email", "dave@example.com"], ["name", "Dave Thomas"], ["pay_type", "Check"], ["updated_at", Fri, 03 Jul 2015 14:26:12 UTC +00:00]]
  [1m[36mSQL (0.7ms)[0m  [1mUPDATE "line_items" SET "cart_id" = $1, "order_id" = $2, "updated_at" = $3 WHERE "line_items"."id" = 980190966[0m  [["cart_id", nil], ["order_id", 980190964], ["updated_at", Fri, 03 Jul 2015 14:26:12 UTC +00:00]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mCart Load (0.3ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT 1[0m  [["id", 980190971]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mLineItem Load (0.3ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 980190971]]
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "carts" WHERE "carts"."id" = $1  [["id", 980190971]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mProduct Load (0.4ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = $1 ORDER BY "products"."id" ASC LIMIT 1  [["id", 207281424]]
  Rendered line_items/_line_item.text.erb (2.1ms)

Sent mail to dave@example.com (7.8ms)
Date: Fri, 03 Jul 2015 10:26:12 -0400
From: FFAP <ffap.itt.2015@gmail.com>
To: dave@example.com
Message-ID: <55969b8419c02_232211bfe8028937@Aria.mail>
Subject: Fast Find Auto Parts Order Confirmation
Mime-Version: 1.0
Content-Type: text/plain;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

Dear Dave Thomas

Thank you for your recent order from Fast Find Auto Parts.

You ordered the following items:

 1 x Programming Ruby 1.9
We'll send you a separate e-mail when your order ships.
Redirected to http://www.example.com/
Completed 302 Found in 35ms (ActiveRecord: 3.9ms)
Started GET "/" for 127.0.0.1 at 2015-07-03 10:26:12 -0400
Processing by StoreController#index as HTML
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "carts" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"  [["created_at", Fri, 03 Jul 2015 14:26:12 UTC +00:00], ["updated_at", Fri, 03 Jul 2015 14:26:12 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mProduct Load (0.4ms)[0m  SELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1
  [1m[36mProduct Load (0.4ms)[0m  [1mSELECT "products".* FROM "products" ORDER BY "products".title ASC[0m
  [1m[35mLineItem Exists (0.3ms)[0m  SELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = $1 LIMIT 1  [["cart_id", 980190972]]
  [1m[36mLineItem Load (0.3ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 980190972]]
  Rendered collection (0.0ms)
  Rendered carts/_cart.html.erb (2.3ms)
Completed 200 OK in 38ms (Views: 32.4ms | ActiveRecord: 2.3ms)
  [1m[35mCart Load (0.3ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT 1  [["id", 980190972]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 980190972]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "orders"
  [1m[36mOrder Load (0.4ms)[0m  [1mSELECT "orders".* FROM "orders"[0m
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "line_items" WHERE "line_items"."order_id" = $1  [["order_id", 980190964]]
  [1m[36mLineItem Load (0.3ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = $1[0m  [["order_id", 980190964]]
  [1m[35mProduct Load (0.3ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = $1 ORDER BY "products"."id" ASC LIMIT 1  [["id", 207281424]]
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
.  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------
UsersControllerTest: test_should_create_user
--------------------------------------------
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "users"
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"sam", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 980190962 LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."name" = 'sam' LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "users" ("created_at", "name", "password_digest", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", Fri, 03 Jul 2015 14:26:12 UTC +00:00], ["name", "sam"], ["password_digest", "$2a$04$BshXXLWxEVeQnITkHgxAS.Zyn83ebU1mBWgkU5dC1WJEKNnxV6Q3G"], ["updated_at", Fri, 03 Jul 2015 14:26:12 UTC +00:00]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/users
Completed 302 Found in 14ms (ActiveRecord: 2.0ms)
  [1m[35m (4.8ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
.  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------
UsersControllerTest: test_should_destroy_user
---------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "users"
Processing by UsersController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 980190962 LIMIT 1[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", "980190962"]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/users
Completed 302 Found in 7ms (ActiveRecord: 1.9ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
.  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-----------------------------------------
UsersControllerTest: test_should_get_edit
-----------------------------------------
  [1m[35mUser Load (0.3ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by UsersController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 980190962 LIMIT 1[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", "980190962"]]
  Rendered users/_form.html.erb (7.0ms)
Completed 200 OK in 15ms (Views: 12.6ms | ActiveRecord: 0.7ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
.  [1m[35m (0.1ms)[0m  BEGIN
------------------------------------------
UsersControllerTest: test_should_get_index
------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by UsersController#index as HTML
  [1m[35mUser Load (0.4ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 980190962 LIMIT 1
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "users".* FROM "users" ORDER BY "users".name ASC[0m
Completed 200 OK in 9ms (Views: 6.3ms | ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
.  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
----------------------------------------
UsersControllerTest: test_should_get_new
----------------------------------------
  [1m[35mUser Load (0.3ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by UsersController#new as HTML
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 980190962 LIMIT 1[0m
  Rendered users/_form.html.erb (4.0ms)
Completed 200 OK in 10ms (Views: 8.1ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
.  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------
UsersControllerTest: test_should_show_user
------------------------------------------
  [1m[35mUser Load (0.3ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by UsersController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 980190962 LIMIT 1[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", "980190962"]]
Completed 200 OK in 7ms (Views: 4.1ms | ActiveRecord: 0.7ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
.  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------
UsersControllerTest: test_should_update_user
--------------------------------------------
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"dave", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "id"=>"980190962"}
  [1m[35mUser Load (0.4ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 980190962 LIMIT 1
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", "980190962"]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE ("users"."name" = 'dave' AND "users"."id" != 980190962) LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  UPDATE "users" SET "password_digest" = $1, "updated_at" = $2 WHERE "users"."id" = 980190962  [["password_digest", "$2a$04$GkUTvgjPG8Oc5ZFvwPUFfOAOuIf42QvesZHmAT9PxbQroCTdWyFWm"], ["updated_at", Fri, 03 Jul 2015 14:26:12 UTC +00:00]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/users
Completed 302 Found in 11ms (ActiveRecord: 2.2ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
.

Finished tests in 2.732024s, 20.1316 tests/s, 50.8780 assertions/s.

  1) Failure:
Api::ProductQueryControllerTest#test_should_return_list_of_products_in_JSON [/home/mario/railsprj/depot/test/controllers/api/product_query_controller_test.rb:6]:
Expected: 200
  Actual: 302

  2) Failure:
Api::ProductQueryControllerTest#test_should_return_list_of_products_in_XML [/home/mario/railsprj/depot/test/controllers/api/product_query_controller_test.rb:13]:
Expected: 200
  Actual: 302

  3) Failure:
Api::ProductQueryControllerTest#test_should_return_product_by_id [/home/mario/railsprj/depot/test/controllers/api/product_query_controller_test.rb:20]:
Expected: 200
  Actual: 302

  4) Failure:
Api::ProductQueryControllerTest#test_should_return_product_by_title [/home/mario/railsprj/depot/test/controllers/api/product_query_controller_test.rb:28]:
Expected: 200
  Actual: 302

55 tests, 139 assertions, 4 failures, 0 errors, 0 skips
